!function(n){"use strict";var r=function(n){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."};this.init(n)},t,u,i;r.prototype={constructor:r,validators:{notnull:function(n){return n.length>0},notblank:function(n){return"string"==typeof n&&""!==n.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(n){if("object"==typeof n){for(var t in n)if(this.required(n[t]))return!0;return!1}return this.notnull(n)&&this.notblank(n)},type:function(n,t){var i;switch(t){case"number":i=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":i=/^\d+$/;break;case"alphanum":i=/^\w+$/;break;case"email":i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i;break;case"url":n=new RegExp("(https?|s?ftp|git)","i").test(n)?n:"http://"+n;case"urlstrict":i=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":i=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":i=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return!1}return""!==n?i.test(n):!1},regexp:function(n,t,i){return new RegExp(t,i.options.regexpFlag||"").test(n)},minlength:function(n,t){return n.length>=t},maxlength:function(n,t){return n.length<=t},rangelength:function(n,t){return this.minlength(n,t[0])&&this.maxlength(n,t[1])},min:function(n,t){return Number(n)>=t},max:function(n,t){return Number(n)<=t},range:function(n,t){return n>=t[0]&&n<=t[1]},equalto:function(t,i,r){return r.options.validateIfUnchanged=!0,t===n(i).val()},remote:function(t,i,r){var u={},f={};u[r.$element.attr("name")]=t;"undefined"!=typeof r.options.remoteDatatype&&(f={dataType:r.options.remoteDatatype});var e=function(t,i){"undefined"!=typeof i&&"undefined"!=typeof r.Validator.messages.remote&&i!==r.Validator.messages.remote&&n(r.ulError+" .remote").remove();r.updtConstraint({name:"remote",valid:t},i);r.manageValidationResult()},o=function(t){if("object"==typeof t)return t;try{t=n.parseJSON(t)}catch(i){}return t},s=function(n){return"object"==typeof n&&null!==n?"undefined"!=typeof n.error?n.error:"undefined"!=typeof n.message?n.message:null:null};return n.ajax(n.extend({},{url:i,data:u,type:r.options.remoteMethod||"GET",success:function(n){n=o(n);e(1===n||!0===n||"object"==typeof n&&null!==n&&"undefined"!=typeof n.success,s(n))},error:function(n){n=o(n);e(!1,s(n))}},f)),null},mincheck:function(n,t){return this.minlength(n,t)},maxcheck:function(n,t){return this.maxlength(n,t)},rangecheck:function(n,t){return this.rangelength(n,t)}},init:function(n){var i=n.validators,r=n.messages;for(var t in i)this.addValidator(t,i[t]);for(t in r)this.addMessage(t,r[t])},formatMesssage:function(n,t){if("object"==typeof t){for(var i in t)n=this.formatMesssage(n,t[i]);return n}return"string"==typeof n?n.replace(new RegExp("%s","i"),t):""},addValidator:function(n,t){this.validators[n]=t},addMessage:function(n,t,i){if("undefined"!=typeof i&&!0===i){this.messages.type[n]=t;return}if("type"===n){for(var r in t)this.messages.type[r]=t[r];return}this.messages[n]=t}};t=function(n,t,i){if(this.options=t,this.Validator=new r(t),i==="ParsleyFieldMultiple")return this;this.init(n,i||"ParsleyField")};t.prototype={constructor:t,init:function(t,i){this.type=i;this.valid=!0;this.element=t;this.validatedOnce=!1;this.$element=n(t);this.val=this.$element.val();this.isRequired=!1;this.constraints={};"undefined"==typeof this.isRadioOrCheckbox&&(this.isRadioOrCheckbox=!1,this.hash=this.generateHash(),this.errorClassHandler=this.options.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element);this.ulErrorManagement();this.bindHtml5Constraints();this.addConstraints();this.hasConstraints()&&this.bindValidationEvents()},setParent:function(t){this.$parent=n(t)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.prop("required"))&&(this.options.required=!0);"undefined"!=typeof this.$element.attr("type")&&new RegExp(this.$element.attr("type"),"i").test("email url number range")&&(this.options.type=this.$element.attr("type"),new RegExp(this.options.type,"i").test("number range")&&(this.options.type="number","undefined"!=typeof this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min")),"undefined"!=typeof this.$element.attr("max")&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max"))));"string"==typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length&&(this.options.regexp=this.$element.attr("pattern"))},addConstraints:function(){var n,t;for(n in this.options)t={},t[n]=this.options[n],this.addConstraint(t,!0)},addConstraint:function(n,t){for(var i in n)i=i.toLowerCase(),"function"==typeof this.Validator.validators[i]&&(this.constraints[i]={name:i,requirements:n[i],valid:null},i==="required"&&(this.isRequired=!0),this.addCustomConstraintMessage(i));"undefined"==typeof t&&this.bindValidationEvents()},updateConstraint:function(n,t){for(var i in n)this.updtConstraint({name:i,requirements:n[i],valid:null},t)},updtConstraint:function(t,i){this.constraints[t.name]=n.extend(!0,this.constraints[t.name],t);"string"==typeof i&&(this.Validator.messages[t.name]=i);this.bindValidationEvents()},removeConstraint:function(n){var n=n.toLowerCase();if(delete this.constraints[n],n==="required"&&(this.isRequired=!1),!this.hasConstraints()){if("ParsleyForm"==typeof this.getParent()){this.getParent().removeItem(this.$element);return}this.destroy();return}this.bindValidationEvents()},addCustomConstraintMessage:function(n){var t=n+("type"===n&&"undefined"!=typeof this.options[n]?this.options[n].charAt(0).toUpperCase()+this.options[n].substr(1):"")+"Message";"undefined"!=typeof this.options[t]&&this.Validator.addMessage("type"===n?this.options[n]:n,this.options[t],"type"===n)},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);this.options.remote&&!new RegExp("change","i").test(this.options.trigger)&&(this.options.trigger=this.options.trigger?" change":"change");var t=(this.options.trigger?this.options.trigger:"")+(new RegExp("key","i").test(this.options.trigger)?"":" keyup");this.$element.is("select")&&(t+=new RegExp("change","i").test(t)?"":" change");t=t.replace(/^\s+/g,"").replace(/\s+$/g,"");this.$element.on((t+" ").split(" ").join("."+this.type+" "),!1,n.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.data("value")||this.$element.val()},eventValidation:function(n){var t=this.getVal();if(n.type==="keyup"&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce||n.type==="change"&&!/change/i.test(this.options.trigger)&&!this.validatedOnce||!this.isRadioOrCheckbox&&this.getLength(t)<this.options.validationMinlength&&!this.validatedOnce)return!0;this.validate()},getLength:function(n){return!n||!n.hasOwnProperty("length")?0:n.length},isValid:function(){return this.validate(!1)},hasConstraints:function(){for(var n in this.constraints)return!0;return!1},validate:function(n){var t=this.getVal(),i=null;return this.hasConstraints()?this.options.listeners.onFieldValidate(this.element,this)||""===t&&!this.isRequired?(this.reset(),null):this.needsValidation(t)?(i=this.applyValidators(),("undefined"!=typeof n?n:this.options.showErrors)&&this.manageValidationResult(),i):this.valid:null},needsValidation:function(n){return!this.options.validateIfUnchanged&&this.valid!==null&&this.val===n&&this.validatedOnce?!1:(this.val=n,this.validatedOnce=!0)},applyValidators:function(){var n=null,t,i;for(t in this.constraints)if(i=this.Validator.validators[this.constraints[t].name](this.val,this.constraints[t].requirements,this),!1===i){n=!1;this.constraints[t].valid=n;this.options.listeners.onFieldError(this.element,this.constraints,this)}else!0===i&&(this.constraints[t].valid=!0,n=!1!==n,!1===this.options.listeners.onFieldSuccess(this.element,this.constraints,this)&&(n=!1));return n},manageValidationResult:function(){var t=null;for(var i in this.constraints)!1===this.constraints[i].valid?(this.manageError(this.constraints[i]),t=!1):!0===this.constraints[i].valid&&(this.removeError(this.constraints[i].name),t=!1!==t);return(this.valid=t,!0===this.valid)?(this.removeErrors(),this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass),!0):!1===this.valid?(this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass),!1):(this.ulError&&n(this.ulError).children().length===0&&this.removeErrors(),t)},ulErrorManagement:function(){this.ulError="#"+this.hash;this.ulTemplate=n(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(t){var r=this.ulError+" ."+t,i=this;this.options.animate?n(r).fadeOut(this.options.animateDuration,function(){n(this).remove();i.ulError&&n(i.ulError).children().length===0&&i.removeErrors()}):n(r).remove()},addError:function(t){var i,r;for(i in t)r=n(this.options.errors.errorElem).addClass(i),n(this.ulError).append(this.options.animate?n(r).html(t[i]).hide().fadeIn(this.options.animateDuration):n(r).html(t[i]))},removeErrors:function(){this.options.animate?n(this.ulError).fadeOut(this.options.animateDuration,function(){n(this).remove()}):n(this.ulError).remove()},reset:function(){this.valid=null;this.removeErrors();this.validatedOnce=!1;this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);for(var n in this.constraints)this.constraints[n].valid=null;return this},manageError:function(t){if((n(this.ulError).length||this.manageErrorContainer(),"required"!==t.name||null===this.getVal()||!(this.getVal().length>0))&&(!this.isRequired||"required"===t.name||null!==this.getVal()&&0!==this.getVal().length)){var i=t.name,r=!1!==this.options.errorMessage?"custom-error-message":i,u={},f=!1!==this.options.errorMessage?this.options.errorMessage:t.name==="type"?this.Validator.messages[i][t.requirements]:"undefined"==typeof this.Validator.messages[i]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[i],t.requirements);n(this.ulError+" ."+r).length||(u[r]=f,this.addError(u))}},manageErrorContainer:function(){var i=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),t=this.options.animate?this.ulTemplate.show():this.ulTemplate;if("undefined"!=typeof i){n(i).append(t);return}this.isRadioOrCheckbox?this.$element.parent().after(t):this.$element.after(t)},addListener:function(n){for(var t in n)this.options.listeners[t]=n[t]},destroy:function(){this.$element.removeClass("parsley-validated");this.reset().$element.off("."+this.type).removeData(this.type)}};u=function(n,t,i){this.initMultiple(n,t);this.inherit(n,t);this.Validator=new r(t);this.init(n,i||"ParsleyFieldMultiple")};u.prototype={constructor:u,initMultiple:function(t,i){this.element=t;this.$element=n(t);this.group=i.group||!1;this.hash=this.getName();this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]';this.isRadioOrCheckbox=!0;this.isRadio=this.$element.is("input[type=radio]");this.isCheckbox=this.$element.is("input[type=checkbox]");this.errorClassHandler=i.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(n,i){var u=new t(n,i,"ParsleyFieldMultiple");for(var r in u)"undefined"==typeof this[r]&&(this[r]=u[r])},getName:function(){if(this.group)return"parsley-"+this.group;if("undefined"==typeof this.$element.attr("name"))throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !";return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio)return n(this.siblings+":checked").val()||"";if(this.isCheckbox){var t=[];return n(this.siblings+":checked").each(function(){t.push(n(this).val())}),t}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);var t=this,i=(this.options.trigger?this.options.trigger:"")+(new RegExp("change","i").test(this.options.trigger)?"":" change");i=i.replace(/^\s+/g,"").replace(/\s+$/g,"");n(this.siblings).each(function(){n(this).on(i.split(" ").join("."+t.type+" "),!1,n.proxy(t.eventValidation,t))})}};i=function(n,t,i){this.init(n,t,i||"parsleyForm")};i.prototype={constructor:i,init:function(t,i,r){this.type=r;this.items=[];this.$element=n(t);this.options=i;var u=this;this.$element.find(i.inputs).each(function(){u.addItem(this)});this.$element.on("submit."+this.type,!1,n.proxy(this.validate,this))},addListener:function(n){var t,i;for(t in n)if(new RegExp("Field").test(t))for(i=0;i<this.items.length;i++)this.items[i].addListener(n);else this.options.listeners[t]=n[t]},addItem:function(t){if(n(t).is(this.options.excluded))return!1;var i=n(t).parsley(this.options);i.setParent(this);this.items.push(i)},removeItem:function(t){for(var r=n(t).parsley(),i=0;i<this.items.length;i++)if(this.items[i].hash===r.hash)return this.items[i].destroy(),this.items.splice(i,1),!0;return!1},validate:function(n){var i=!0,t,r;for(this.focusedField=!1,t=0;t<this.items.length;t++)"undefined"!=typeof this.items[t]&&!1===this.items[t].validate()&&(i=!1,(this.focusedField||"first"!==this.options.focus)&&"last"!==this.options.focus||(this.focusedField=this.items[t].$element));return(this.focusedField&&!i&&this.focusedField.focus(),r=this.options.listeners.onFormSubmit(i,n,this),"undefined"!=typeof r)?r:i},isValid:function(){for(var n=0;n<this.items.length;n++)if(!1===this.items[n].isValid())return!1;return!0},removeErrors:function(){for(var n=0;n<this.items.length;n++)this.items[n].parsley("reset")},destroy:function(){for(var n=0;n<this.items.length;n++)this.items[n].destroy();this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var n=0;n<this.items.length;n++)this.items[n].reset()}};n.fn.parsley=function(r,f){function s(o,s){var h=n(o).data(s),c;if(!h){switch(s){case"parsleyForm":h=new i(o,e,"parsleyForm");break;case"parsleyField":h=new t(o,e,"parsleyField");break;case"parsleyFieldMultiple":h=new u(o,e,"parsleyFieldMultiple");break;default:return}n(o).data(s,h)}return"string"==typeof r&&"function"==typeof h[r]?(c=h[r](f),"undefined"!=typeof c?c:n(o)):h}var e=n.extend(!0,{},n.fn.parsley.defaults,"undefined"!=typeof window.ParsleyConfig?window.ParsleyConfig:{},r,this.data()),o=null;return n(this).is("form")||!0===n(this).data("bind")?o=s(n(this),"parsleyForm"):n(this).is(e.inputs)&&!n(this).is(e.excluded)&&(o=s(n(this),n(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField")),"function"==typeof f?f():o};n.fn.parsley.Constructor=i;n.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], input[type=file], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},showErrors:!0,messages:{},validateIfUnchanged:!1,errors:{classHandler:function(){},container:function(){},errorsWrapper:"<ul><\/ul>",errorElem:"<li><\/li>"},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}};n(window).on("load",function(){n('[data-validate="parsley"]').each(function(){n(this).parsley()})})}(window.jQuery||window.Zepto);
//# sourceMappingURL=parsley.min.js.map